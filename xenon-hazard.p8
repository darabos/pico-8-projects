pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
function osp(s,sx,sy,color,width)
 for c=0,15 do
  pal(c,color)
 end
 for x=-width,width do
  for y=-width,width do
   spr(s,sx+x,sy+y,2,2)
  end
 end
 reset_pal()
end

function tsp(s,sx,sy)
 osp(s,sx,sy,7,2)
 osp(s,sx,sy,0,1)
 pal(2,0)
 spr(s,sx,sy,2,2)
end

function reset_pal()
 pal()
 --pal(0,-13,1)
 pal(3,-5,1)
 pal(7,-9,1)
end
objs={}
function addobj(s,x,y)
 local o={
  spr=s,x=x,y=y,
  draw1=function(o)
   osp(o.spr,o.x,o.y,7,2)
  end,
  draw2=function(o)
   osp(o.spr,o.x,o.y,0,1)
   pal(2,0)
   spr(o.spr,o.x,o.y,2,2)
  end,
  draw3=function(o)
  end,
 }
 add(objs,o)
 return o
end
addobj(3,30,10)
p=addobj(1,10,10)
addobj(5,50,10)
function _draw()
 cls()
 for o in all(objs) do
  o:draw1()
 end
 for o in all(objs) do
  o:draw2()
 end
 for o in all(objs) do
  o:draw3()
 end
end

t=0
function _update()
 t+=1
 p.x+=.1
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000cccc0000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000077700000000000000000000000000000cccccc000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000777777000000000000000000000000000ccc0cc000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000777777777000000000000000000000000cc00c0000cc0000000000000000000000000000000000000000000000000000000000000000000000000
0070070000077727777777000000000000000000ccc0cc000000cccc000000000000000000000000000000000000000000000000000000000000000000000000
0000000000777727772777000000000000000000c0c0cc00000cc00c000000000000000000000000000000000000000000000000000000000000000000000000
0000000000777727772777000000000000000000c000ccc000cc0000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000777777772777000000977997799000cc00ccccccc20000000000000000cccc00000000000000000000000000000000000000000000000000000000
0000000000077777777777000009999999999900cccccccccccc0000000cccc0000ccccc00ccc000000000000000000000000000000000000000000000000000
00000000000002227777700000777997799777000ccccccccc22000000ccccc0000ccc000ccccc00000000000000000000000000000000000000000000000000
000000000000022222200000009999999999990000cccccccccc000000cccc00000000000ccccc00000000000000000000000000000000000000000000000000
000000000000cccc222000000002222222222000000cccccc2220000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000ccccccc0000000022777777770000000ccccccc00000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000777c077770000000277777777700000000ccc22000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000cccc0cccc0000000777777777700000000ccccc000000000000000000000000000000000000000000000000000000000000000000000000000000
